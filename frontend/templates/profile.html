<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Профиль</title>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <link rel="stylesheet" href="../static/css/no_blue.css" />
        <link rel="stylesheet" href="../static/css/profile.css" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>
    <body>
        <!-- Верхняя панель -->
        <div class="top-bar">
            <span>Профиль</span>
            <i class="fas fa-bell" id="notifyBtn"></i>
        </div>

        <main>
            <div class="content">
                <!-- Аватар + имя -->
                <section class="profile-header">
                    <div class="avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h2 class="username">Иван Петров</h2>
                </section>

                <!-- Проекты -->
                <section class="profile-projects card">
                    <h3>Мои проекты</h3>
                    <ul class="project-list">
                        <li><i class="fas fa-folder"></i> Project Alpha</li>
                        <li><i class="fas fa-folder"></i> Project Beta</li>
                    </ul>
                </section>

                <!-- Участие -->
                <section class="profile-projects card">
                    <h3>Участвую в проектах</h3>
                    <ul class="project-list">
                        <li>
                            <i class="fas fa-folder"></i> CRM System
                            <i class="fas fa-lock-open access-icon"></i>
                        </li>
                        <li>
                            <i class="fas fa-folder"></i> Design Hub
                            <i class="fas fa-lock access-icon"></i>
                        </li>
                    </ul>
                </section>

                <!-- Фильтры -->
                <section class="filters card">
                    <h3>Фильтры</h3>
                    <ul class="filter-list">
                        <li>
                            <label>
                                <input
                                    type="checkbox"
                                    class="filter-checkbox"
                                    value="today"
                                />
                                <i class="fas fa-calendar-day"></i> Сегодня
                            </label>
                        </li>
                        <li>
                            <label>
                                <input
                                    type="checkbox"
                                    class="filter-checkbox"
                                    value="assigned"
                                />
                                <i class="fas fa-user-check"></i> Назначено мне
                            </label>
                        </li>
                        <li>
                            <label>
                                <input
                                    type="checkbox"
                                    class="filter-checkbox"
                                    value="important"
                                />
                                <i class="fas fa-star"></i> Важные
                            </label>
                        </li>
                    </ul>
                </section>

                <!-- Мини статистика -->
                <section class="stats card">
                    <h3>Статистика</h3>
                    <ul class="stats-list">
                        <li>
                            Всего закрытых задач: <span id="statTotal">12</span>
                        </li>
                        <li>
                            Последняя активность:
                            <span id="statLast">20.09.2025</span>
                        </li>
                        <li>
                            Проектов с активностью:
                            <span id="statProjects">3</span>
                        </li>
                    </ul>
                    <button id="openStatsBtn" class="stats-btn">
                        Посмотреть ещё
                    </button>
                </section>
            </div>
        </main>

        <!-- Нижняя панель -->
        <div class="bottom-bar">
            <i class="fas fa-clock" id="clockBtn"></i>
            <i class="fas fa-folder" id="folderBtn"></i>
            <i class="fas fa-user active" id="userBtn"></i>
        </div>

        <!-- Модал уведомлений -->
        <div class="modal" id="notifyModal">
            <div class="modal-header">
                <h3>Уведомления</h3>
                <i class="fas fa-times" id="closeNotify"></i>
            </div>
            <p>Нет новых уведомлений.</p>
        </div>

        <!-- Модалка статистики -->
        <div class="modal" id="statsModal">
            <div class="modal-header">
                <h3>Подробная статистика</h3>
                <i class="fas fa-times" id="closeStats"></i>
            </div>
            <div class="modal-body">
                <div class="project-stats">
                    <p>Project Alpha — 5 задач</p>
                    <p>Project Beta — 3 задачи</p>
                    <p>CRM System — 4 задачи</p>
                </div>

                <canvas id="statsChart" height="180"></canvas>

                <div class="interval-buttons">
                    <button data-interval="12h">12ч</button>
                    <button data-interval="3d">3 дня</button>
                    <button data-interval="1w">Неделя</button>
                    <button data-interval="2w">2 недели</button>
                    <button data-interval="1m">Месяц</button>
                </div>

                <div class="custom-interval">
                    <div>
                        <label onclick="openCalendar('dateFrom')"
                            >От:
                            <input
                                type="text"
                                id="dateFrom"
                                placeholder="YYYY-MM-DD"
                            />
                        </label>
                    </div>

                    <div>
                        <label onclick="openCalendar('dateTo')"
                            >До:
                            <input
                                type="text"
                                id="dateTo"
                                placeholder="YYYY-MM-DD"
                            />
                        </label>
                    </div>
                    <div>
                        <button id="applyInterval">Применить</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Кастомный календарь -->
        <div class="calendar-modal" id="calendarModal">
            <div class="calendar-content">
                <div class="calendar-header">
                    <button id="prevMonth">&lt;</button>
                    <span id="calendarMonth"></span>
                    <button id="nextMonth">&gt;</button>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
                <div class="calendar-actions">
                    <button id="cancelCalendar">Отмена</button>
                    <button id="applyCalendar">Выбрать</button>
                </div>
            </div>
        </div>

        <script src="../static/js/profile.js" defer></script>
    </body>
</html>
